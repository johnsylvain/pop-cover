{"version":3,"sources":["index.js"],"names":["canvas","document","querySelector","width","height","CoverArt","context","getContext","defaultName","artistName","gradients","currentGradient","render","newName","image","artistImage","length","clearRect","globalCompositeOperation","console","log","ratio","drawImage","font","fillStyle","textAlign","fillText","gradient","createLinearGradient","addColorStop","fillRect","toDataURL","coverArt","addEventListener","event","name","target","value","trim","title","setArtistName","imageInput","url","window","URL","createObjectURL","files","Image","src","setArtistImage","getElementById","downloadImage","export","toLowerCase","replace","cycleGradients","data","filename","a","createElement","href","download","body","appendChild","click","removeChild"],"mappings":";;;;;;AAAA,IAAMA,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAf;AACAF,MAAM,CAACG,KAAP,GAAe,IAAf;AACAH,MAAM,CAACI,MAAP,GAAgB,IAAhB;;IAEMC;;;AACJ,oBAAYL,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;AACA,SAAKM,OAAL,GAAeN,MAAM,CAACO,UAAP,CAAkB,IAAlB,CAAf;AACA,SAAKC,WAAL,GAAmB,OAAnB;AACA,SAAKC,UAAL,GAAkB,KAAKD,WAAvB;AACA,SAAKE,SAAL,GAAiB,CACf,CAAC,SAAD,EAAY,SAAZ,CADe,EAEf,CAAC,SAAD,EAAY,SAAZ,CAFe,EAGf,CAAC,SAAD,EAAY,SAAZ,CAHe,EAIf,CAAC,SAAD,EAAY,SAAZ,CAJe,CAAjB;AAMA,SAAKC,eAAL,GAAuB,CAAvB;AACA,SAAKC,MAAL;AACD;;;;kCAEaC,SAAS;AACrB,WAAKJ,UAAL,GAAkBI,OAAO,KAAK,EAAZ,GAAiB,KAAKL,WAAtB,GAAoCK,OAAtD;AACA,WAAKD,MAAL;AACD;;;mCAEcE,OAAO;AACpB,WAAKC,WAAL,GAAmBD,KAAnB;AACA,WAAKF,MAAL;AACD;;;qCAEgB;AACf,WAAKD,eAAL,GAAuB,CAAC,KAAKA,eAAL,GAAuB,CAAxB,IAA6B,KAAKD,SAAL,CAAeM,MAAnE;AACA,WAAKJ,MAAL;AACD;;;6BAEQ;AACP,WAAKN,OAAL,CAAaW,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6BjB,MAAM,CAACG,KAApC,EAA2CH,MAAM,CAACI,MAAlD;AACA,WAAKE,OAAL,CAAaY,wBAAb,GAAwC,kBAAxC;;AAEA,UAAI,KAAKH,WAAT,EAAsB;AACpBI,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,WAAL,CAAiBZ,KAA7B,EAAoC,KAAKY,WAAL,CAAiBX,MAArD;AACA,YAAMiB,KAAK,GAAG,KAAKrB,MAAL,CAAYG,KAAZ,GAAoB,KAAKY,WAAL,CAAiBZ,KAAnD;AACA,YAAMC,MAAM,GAAG,KAAKW,WAAL,CAAiBX,MAAjB,GAA0BiB,KAAzC;AACA,aAAKf,OAAL,CAAagB,SAAb,CAAuB,KAAKP,WAA5B,EAAyC,CAAzC,EAA4C,GAA5C,EAAiD,KAAKf,MAAL,CAAYG,KAA7D,EAAoEC,MAApE;AACD;;AAED,WAAKE,OAAL,CAAaiB,IAAb,GAAoB,wBAApB;AACA,WAAKjB,OAAL,CAAakB,SAAb,GAAyB,SAAzB;AAEA,WAAKlB,OAAL,CAAamB,SAAb,GAAyB,QAAzB;AACA,WAAKnB,OAAL,CAAaoB,QAAb,CAAsB,cAAtB,EAAsC1B,MAAM,CAACG,KAAP,GAAe,CAArD,EAAwD,GAAxD;AAEA,WAAKG,OAAL,CAAaiB,IAAb,GAAoB,wBAApB;AACA,WAAKjB,OAAL,CAAaoB,QAAb,CAAsB,KAAKjB,UAA3B,EAAuCT,MAAM,CAACG,KAAP,GAAe,CAAtD,EAAyD,GAAzD;AAEA,UAAMwB,QAAQ,GAAG,KAAKrB,OAAL,CAAasB,oBAAb,CAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,IAA3C,CAAjB;AACAD,MAAAA,QAAQ,CAACE,YAAT,CAAsB,CAAtB,EAAyB,KAAKnB,SAAL,CAAe,KAAKC,eAApB,EAAqC,CAArC,CAAzB;AACAgB,MAAAA,QAAQ,CAACE,YAAT,CAAsB,CAAtB,EAAyB,KAAKnB,SAAL,CAAe,KAAKC,eAApB,EAAqC,CAArC,CAAzB;AAEA,WAAKL,OAAL,CAAakB,SAAb,GAAyBG,QAAzB;AACA,WAAKrB,OAAL,CAAawB,QAAb,CAAsB,CAAtB,EAAyB,GAAzB,EAA8B9B,MAAM,CAACG,KAArC,EAA4C,GAA5C;AAEA,WAAKG,OAAL,CAAakB,SAAb,GAAyB,OAAzB;AACA,WAAKlB,OAAL,CAAawB,QAAb,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B9B,MAAM,CAACG,KAAnC,EAA0CH,MAAM,CAACI,MAAjD;AACD;;;8BAEQ;AACP,aAAO,KAAKJ,MAAL,CAAY+B,SAAZ,CAAsB,YAAtB,EAAoC,GAApC,CAAP;AACD;;;;;;AAGH,IAAMC,QAAQ,GAAG,IAAI3B,QAAJ,CAAaL,MAAb,CAAjB;AAEAC,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuC+B,gBAAvC,CAAwD,OAAxD,EAAiE,UAACC,KAAD,EAAW;AAC1E,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmBC,IAAnB,EAAb;AACArC,EAAAA,QAAQ,CAACsC,KAAT,oBAA2BJ,IAAI,eAAQA,IAAR,IAAiB,EAAhD;AACAH,EAAAA,QAAQ,CAACQ,aAAT,CAAuBN,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmBC,IAAnB,EAAvB;AACD,CAJD;AAMA,IAAMG,UAAU,GAAGxC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAnB;AACAuC,UAAU,CAACR,gBAAX,CAA4B,QAA5B,EAAsC,YAAM;AAC1C,MAAMS,GAAG,GAAGC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BJ,UAAU,CAACK,KAAX,CAAiB,CAAjB,CAA3B,CAAZ;AACA,MAAMhC,KAAK,GAAG,IAAIiC,KAAJ,EAAd;AACAjC,EAAAA,KAAK,CAACkC,GAAN,GAAYN,GAAZ;AACA5B,EAAAA,KAAK,CAACmB,gBAAN,CAAuB,MAAvB,EAA+B,YAAM;AACnCD,IAAAA,QAAQ,CAACiB,cAAT,CAAwBnC,KAAxB;AACD,GAFD;AAGD,CAPD;AASAb,QAAQ,CAACiD,cAAT,CAAwB,UAAxB,EAAoCjB,gBAApC,CAAqD,OAArD,EAA8D,YAAM;AAClEkB,EAAAA,aAAa,CAACnB,QAAQ,CAACoB,MAAT,EAAD,oBAA+BpB,QAAQ,CAACvB,UAAT,CAAoB4C,WAApB,GAAkCC,OAAlC,CAA0C,GAA1C,EAA+C,GAA/C,CAA/B,WAAb;AACD,CAFD;AAIArD,QAAQ,CAACiD,cAAT,CAAwB,cAAxB,EAAwCjB,gBAAxC,CAAyD,OAAzD,EAAkE,YAAM;AACtED,EAAAA,QAAQ,CAACuB,cAAT;AACD,CAFD;;AAIA,SAASJ,aAAT,CAAuBK,IAAvB,EAAyD;AAAA,MAA5BC,QAA4B,uEAAjB,eAAiB;AACrD,MAAMC,CAAC,GAAGzD,QAAQ,CAAC0D,aAAT,CAAuB,GAAvB,CAAV;AACAD,EAAAA,CAAC,CAACE,IAAF,GAASJ,IAAT;AACAE,EAAAA,CAAC,CAACG,QAAF,GAAaJ,QAAb;AACAxD,EAAAA,QAAQ,CAAC6D,IAAT,CAAcC,WAAd,CAA0BL,CAA1B;AACAA,EAAAA,CAAC,CAACM,KAAF;AACA/D,EAAAA,QAAQ,CAAC6D,IAAT,CAAcG,WAAd,CAA0BP,CAA1B;AACH","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["const canvas = document.querySelector('#cover-art');\ncanvas.width = 1000;\ncanvas.height = 1000;\n\nclass CoverArt {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.context = canvas.getContext('2d');\n    this.defaultName = 'Music';\n    this.artistName = this.defaultName;\n    this.gradients = [\n      ['#E7DDE0', '#6C84B0'],\n      ['#5878A7', '#7DA2D2'],\n      ['#AED6CD', '#BCE8C8'],\n      ['#DC9655', '#F8B95A']\n    ];\n    this.currentGradient = 0;\n    this.render();\n  }\n\n  setArtistName(newName) {\n    this.artistName = newName === '' ? this.defaultName : newName;\n    this.render();\n  }\n\n  setArtistImage(image) {\n    this.artistImage = image;\n    this.render();\n  }\n\n  cycleGradients() {\n    this.currentGradient = (this.currentGradient + 1) % this.gradients.length;\n    this.render();\n  }\n\n  render() {\n    this.context.clearRect(0, 0, canvas.width, canvas.height);\n    this.context.globalCompositeOperation = 'destination-over';\n\n    if (this.artistImage) {\n      console.log(this.artistImage.width, this.artistImage.height)\n      const ratio = this.canvas.width / this.artistImage.width;\n      const height = this.artistImage.height * ratio;\n      this.context.drawImage(this.artistImage, 0, 300, this.canvas.width, height);\n    }\n\n    this.context.font = '600 40px \"Avenir Next\"';\n    this.context.fillStyle = '#1A1414'\n\n    this.context.textAlign = \"center\"; \n    this.context.fillText(\"T H I S  I S\", canvas.width / 2, 160);\n\n    this.context.font = '700 80px \"Avenir Next\"';\n    this.context.fillText(this.artistName, canvas.width / 2, 260); \n\n    const gradient = this.context.createLinearGradient(0, 0, 0, 1000);\n    gradient.addColorStop(0, this.gradients[this.currentGradient][0]);\n    gradient.addColorStop(1, this.gradients[this.currentGradient][1]);\n\n    this.context.fillStyle = gradient;\n    this.context.fillRect(0, 400, canvas.width, 600);\n\n    this.context.fillStyle = \"white\";\n    this.context.fillRect(0, 0, canvas.width, canvas.height);\n  }\n\n  export() {\n    return this.canvas.toDataURL('image/jpeg', 1.0);\n  }\n}\n\nconst coverArt = new CoverArt(canvas);\n\ndocument.querySelector('#artist-name').addEventListener('input', (event) => {\n  const name = event.target.value.trim();\n  document.title = `This is${name ? `: ${name}` : ''}`\n  coverArt.setArtistName(event.target.value.trim());\n});\n\nconst imageInput = document.querySelector('#artist-image');\nimageInput.addEventListener('change', () => {\n  const url = window.URL.createObjectURL(imageInput.files[0])\n  const image = new Image();\n  image.src = url;\n  image.addEventListener('load', () => {\n    coverArt.setArtistImage(image);\n  })\n});\n\ndocument.getElementById('download').addEventListener(\"click\", () => {\n  downloadImage(coverArt.export(), `this-is-${coverArt.artistName.toLowerCase().replace(' ', '-')}.jpeg`);\n});\n\ndocument.getElementById('cycle-colors').addEventListener(\"click\", () => {\n  coverArt.cycleGradients();\n});\n\nfunction downloadImage(data, filename = 'untitled.jpeg') {\n    const a = document.createElement('a');\n    a.href = data;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n}\n"]}